{
  "workflow_id": "codex-{timestamp}",
  "workflow_type": "{greenfield-swift|brownfield-enhancement|health-check}",
  "project_name": "{project_name}",
  "current_phase": "{discovery|analyst|pm|architect|prp_creator|dev|qa}",
  "completed_phases": [],
  "operation_mode": "interactive",

  "project_discovery": {
    "project_name": "{captured_project_name}",
    "project_concept": "{user_provided_concept}",
    "existing_inputs": "{research_brainstorming_or_fresh_start}",
    "discovery_timestamp": "{iso_timestamp}",
    "discovery_completed": false
  },

  "enhancement_discovery": {
    "enhancement_description": "{what_enhancement_feature}",
    "affected_component": "{which_component_area}",
    "constraints_requirements": "{any_constraints}",
    "existing_context_loaded": false,
    "discovery_timestamp": "{iso_timestamp}",
    "discovery_completed": false
  },

  "agent_context": {
    "current_agent": "{orchestrator|analyst|pm|architect|prp_creator|dev|qa}",
    "transformation_history": [
      {
        "from": "orchestrator",
        "to": "analyst",
        "timestamp": "{iso_timestamp}",
        "context_passed": {
          "project_discovery": true,
          "workflow_type": "greenfield-swift"
        }
      }
    ],
    "last_transformation": "{iso_timestamp}"
  },

  "elicitation_history": [
    {
      "phase": "{phase_name}",
      "timestamp": "{iso_timestamp}",
      "method_selected": "{method_name_or_number}",
      "user_response": "{user_input}",
      "applied_changes": "{description_of_changes}"
    }
  ],

  "elicitation_required": {
    "discovery": true,
    "analyst": true,
    "pm": true,
    "architect": true,
    "prp_creator": true,
    "dev": false,
    "qa": false
  },

  "elicitation_completed": {
    "discovery": false,
    "analyst": false,
    "pm": false,
    "architect": false,
    "prp_creator": false,
    "dev": false,
    "qa": false
  },

  "documents": {
    "project-brief.md": {
      "created": "{iso_timestamp}",
      "last_modified": "{iso_timestamp}",
      "version": 1,
      "elicitation_count": 0
    },
    "prd.md": {
      "created": "{iso_timestamp}",
      "last_modified": "{iso_timestamp}",
      "version": 1,
      "elicitation_count": 0
    },
    "architecture.md": {
      "created": "{iso_timestamp}",
      "last_modified": "{iso_timestamp}",
      "version": 1,
      "elicitation_count": 0
    }
  },

  "context_checkpoints": [
    {
      "checkpoint_id": "{uuid}",
      "phase": "{phase_name}",
      "timestamp": "{iso_timestamp}",
      "token_count": 0,
      "validation_passed": false,
      "checkpoint_file": "{file_path}"
    }
  ],

  "validation_results": {
    "level_0": {
      "passed": false,
      "last_check": "{iso_timestamp}",
      "violations": []
    },
    "level_1": {
      "passed": false,
      "last_check": "{iso_timestamp}",
      "errors": [],
      "warnings": []
    },
    "level_2": {
      "passed": false,
      "last_check": "{iso_timestamp}",
      "test_coverage": 0
    },
    "level_3": {
      "passed": false,
      "last_check": "{iso_timestamp}",
      "integration_tests": 0
    },
    "level_4": {
      "passed": false,
      "last_check": "{iso_timestamp}",
      "agent_feedback": {}
    }
  },

  "quality_gate_results": {
    "discovery": {
      "timestamp": "{iso_timestamp}",
      "status": "{APPROVED|CONDITIONAL|REJECTED|NOT_RUN}",
      "score": 0,
      "checklist": "discovery-quality-gate.md",
      "mode": "{interactive|batch|yolo}",
      "summary": "{one-line_summary}",
      "total_items": 0,
      "items_passed": 0,
      "items_failed": 0,
      "critical_failures": 0,
      "standard_failures": 0
    },
    "analyst": {
      "timestamp": "{iso_timestamp}",
      "status": "{APPROVED|CONDITIONAL|REJECTED|NOT_RUN}",
      "score": 0,
      "checklist": "analyst-quality-gate.md",
      "mode": "{interactive|batch|yolo}",
      "summary": "{one-line_summary}",
      "total_items": 0,
      "items_passed": 0,
      "items_failed": 0,
      "critical_failures": 0,
      "standard_failures": 0
    },
    "pm": {
      "timestamp": "{iso_timestamp}",
      "status": "{APPROVED|CONDITIONAL|REJECTED|NOT_RUN}",
      "score": 0,
      "checklist": "pm-quality-gate.md",
      "mode": "{interactive|batch|yolo}",
      "summary": "{one-line_summary}",
      "total_items": 0,
      "items_passed": 0,
      "items_failed": 0,
      "critical_failures": 0,
      "standard_failures": 0
    },
    "architect": {
      "timestamp": "{iso_timestamp}",
      "status": "{APPROVED|CONDITIONAL|REJECTED|NOT_RUN}",
      "score": 0,
      "checklist": "architect-quality-gate.md",
      "mode": "{interactive|batch|yolo}",
      "summary": "{one-line_summary}",
      "total_items": 0,
      "items_passed": 0,
      "items_failed": 0,
      "critical_failures": 0,
      "standard_failures": 0
    },
    "prp": {
      "timestamp": "{iso_timestamp}",
      "status": "{APPROVED|CONDITIONAL|REJECTED|NOT_RUN}",
      "score": 0,
      "checklist": "prp-quality-gate.md",
      "mode": "{interactive|batch|yolo}",
      "summary": "{one-line_summary}",
      "total_items": 0,
      "items_passed": 0,
      "items_failed": 0,
      "critical_failures": 0,
      "standard_failures": 0
    }
  },

  "quality_scores": {
    "discovery": 0,
    "analyst": 0,
    "pm": 0,
    "architect": 0,
    "prp": 0,
    "average": 0
  },

  "validation_evidence": {
    "discovery": [],
    "analyst": [],
    "pm": [],
    "architect": [],
    "prp": []
  },

  "violation_log": [
    {
      "timestamp": "{iso_timestamp}",
      "phase": "{phase_name}",
      "violation_type": "{elicitation_bypass|validation_skip|quality_gate_skipped}",
      "details": "{violation_description}",
      "mode": "{yolo|override}"
    }
  ],

  "feedback_requests": [
    {
      "id": "{fb-ISO-8601-timestamp}",
      "from_agent": "{requesting_agent}",
      "to_agent": "{target_agent}",
      "issue": "{issue_description}",
      "context": {
        "document": "{document_path}",
        "section": "{section_name}",
        "line_refs": [],
        "quote": "{relevant_quote}"
      },
      "status": "{pending|in_progress|resolved|closed}",
      "priority": "{high|medium|low}",
      "created_at": "{iso_timestamp}",
      "resolved_at": "{iso_timestamp_or_null}",
      "resolution": "{resolution_notes_or_null}",
      "iteration_count": 1,
      "related_feedback": []
    }
  ],

  "failure_escalations": [
    {
      "escalation_id": "{esc-ISO-8601-timestamp}",
      "level": "{1|2|3|4}",
      "failed_task": "{task_description}",
      "validation_level": "{0|1|2|3|4}",
      "attempt_count": 0,
      "error_message": "{error_details}",
      "resolution_strategy": "{retry|pattern_analysis|user_intervention|checkpoint}",
      "timestamp": "{iso_timestamp}",
      "resolved": false,
      "resolution_notes": null
    }
  ],

  "epic_learnings": {
    "current_epic": "{epic_name_or_null}",
    "learnings": [
      {
        "epic_id": "{epic_identifier}",
        "epic_name": "{epic_name}",
        "architecture_insights": [],
        "prp_improvements": [],
        "validation_patterns": [],
        "common_issues": [],
        "best_practices_discovered": [],
        "created_at": "{iso_timestamp}"
      }
    ]
  },

  "execution_reports": [
    {
      "report_id": "{report-ISO-8601-timestamp}",
      "prp_file": "{prp_file_path}",
      "epic": "{epic_name}",
      "validation_results": {
        "level_0": true,
        "level_1": true,
        "level_2": true,
        "level_3": true,
        "level_4": true
      },
      "prp_issues_found": [],
      "working_patterns": [],
      "improvement_recommendations": [],
      "timestamp": "{iso_timestamp}"
    }
  ],

  "started_at": "{iso_timestamp}",
  "last_updated": "{iso_timestamp}",
  "status": "{active|paused|completed|failed}"
}